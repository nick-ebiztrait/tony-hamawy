{% if collection.image %}
  {%- assign collection_image = collection.image -%}
{% elsif collection.products.first and collection.products.first.images != empty %}
  {%- assign collection_image = collection.products.first.featured_image -%}
{% else %}
  {% assign collection_image = blank %}
{% endif %}

<div class="collection-grid-item">
  <div class="collection-col-custome">
  <a href="{% if block.settings.button_link != blank%} {{block.settings.button_link}}{% else %}{{ collection.url }}{% endif%}" class="collection-grid-item__link">
    <div class="collection-grid-item__title-wrapper">
      
{% if block.settings.Cimage != blank  %}
   {%- assign height = block.settings.Cimage.width | divided_by: block.settings.Cimage.aspect_ratio | round -%}
<img class="lazyload" src="{{ block.settings.Cimage | img_url: 'master' }}" data-src="{{ block.settings.Cimage | img_url: 'large'  }}"
  data-widths="[540, 720, 900, 1080, 1296, 1512, 1728, 1944, 2048]"
  data-aspectratio="{{ block.settings.Cimage.aspect_ratio }}"
  data-sizes="auto" width="{{ block.settings.Cimage.width }}" height="{{height }}"
  data-parent-fit="cover" loading="lazy"
  alt="{{ block.settings.Cimage.alt | escape }}" style="width:auto; height:auto;">
  
  {% else %}
  {%- assign height = collection_image.width | divided_by: collection_image.aspect_ratio | round -%}
<img class="lazyload" src="{{ collection_image | img_url: 'master' }}" data-src="{{ collection_image | img_url: 'large'  }}"
  data-widths="[540, 720, 900, 1080, 1296, 1512, 1728, 1944, 2048]"
  data-aspectratio="{{ collection_image.aspect_ratio }}"
  data-sizes="auto" width="{{ collection_image.width }}" height="{{height }}"
  data-parent-fit="cover" loading="lazy"
  alt="{{ collection_image.alt | escape }}" style="width:auto; height:auto;">

{% endif %}
      {% comment %}
      <img src="{{ collection_image | img_url: 'large' }}" width="{{ collection_image.width }}" height="{{height }}" alt="{{ shop.name }}" style="width:auto; height:auto;"> 
      {% endcomment %}
      <h3 class="collection-grid-item__title">
        <span class="col-mide-custom">
        {% if collection.title == blank %}
          {{ 'homepage.onboarding.collection_title' | t }}
        {% else %}
          {{ collection.title }}
        {% endif %}
        </span>
      </h3>
    </div>
    {% comment %}
    <div class="col-button"><span>{{ block.settings.button }} <i class="fa fa-long-arrow-right" aria-hidden="true"></i> </span></div>  {% endcomment %}
  </a>

  </div>
</div>
